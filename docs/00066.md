# å»ºç«‹ä½ è‡ªå·±çš„æ•°å­—ä¸–ç•Œ:Numble

> åŸæ–‡ï¼š<https://www.sitepoint.com/wordle-for-numbers-numble/>

åœ¨ [Wordle](https://www.nytimes.com/games/wordle/index.html) å é¢†äº†ä¸–ç•Œå’Œæˆ‘çš„æ¨ç‰¹ä¹‹åï¼Œæˆ‘å’Œä¸–ç•Œä¸Šçš„å…¶ä»–äººä¸€æ ·ï¼Œå˜å¾—æœ‰äº›ç—´è¿·ã€‚æˆ‘å˜å¾—å¦‚æ­¤ç—´è¿·ï¼Œä»¥è‡³äºçªç„¶æƒ³åˆ°è¦åšä¸€ä¸ªç±»ä¼¼çš„åº”ç”¨ç¨‹åºï¼Œä½†é‡ç‚¹æ˜¯æ•°å­—ã€‚ä¸¤å‘¨åï¼Œ [Numble](https://numble.online/) è¯ç”Ÿäº†â€”â€”ä¸€ä¸ªä»£è¡¨æ•°å­—çš„å•è¯ã€‚

![Numble](img/eb34f460f65eaaf2ec89fd01eb1e98f1.png)

## æ•°å­—æ¸¸æˆçš„è§„åˆ™

è¿™çœŸçš„å¾ˆç®€å•:çŒœä¸‰çš„ä¸‰ä½æ•°å€æ•°ã€‚

ä½ æœ‰å››æ¬¡çŒœæµ‹çš„æœºä¼šï¼Œæ¯æ¬¡çŒœæµ‹åï¼Œæ¯ä¸ªæ•°å­—çš„é¢œè‰²ä¼šæ ¹æ®å®ƒçš„ä½ç½®ä»¥åŠå®ƒæ˜¯å¦åœ¨æ•°å­—ä¸­è€Œå˜åŒ–ã€‚

*   ç»¿è‰²:æ•°å­—åœ¨æ­£ç¡®çš„ä½ç½®ã€‚
*   é»„è‰²:æ•°å­—åœ¨å·ç ä¸­ï¼Œä½†åœ¨é”™è¯¯çš„ä½ç½®ã€‚
*   æ ¼é›·:è¿™ä¸ªæ•°å­—æ ¹æœ¬ä¸åœ¨æ•°å­—é‡Œã€‚

å¦‚æœä½ åœ¨å­¦æ ¡å·²ç»å¿˜è®°äº†ï¼Œåˆ¤æ–­ä¸€ä¸ªæ•°å­—æ˜¯å¦æ˜¯ 3 çš„å€æ•°çš„è§„åˆ™æ˜¯ï¼Œè¿™äº›æ•°å­—åŠ èµ·æ¥æ˜¯å¦æ˜¯ 3 çš„å€æ•°ã€‚

æ¯”å¦‚:123 æ˜¯ 3 çš„å€æ•°ï¼Œå› ä¸º 1 + 2 + 3 = 6ã€‚

## ä¿å§†å›½å®¶

ä¸ºäº†ä½¿æ„å»º Numble æ›´å®¹æ˜“ï¼Œæˆ‘ä½¿ç”¨äº†ä¸€ä¸ªåä¸º [Nanny State](https://github.com/daz4126/Nanny-State) çš„å°å‹åº“ã€‚å®ƒæ˜¯ç”±è¾¾ä¼¦Â·ç¼æ–¯å†™çš„ï¼Œå¦‚æœä½ é”™è¿‡äº†ä»–å†™çš„[ä¸€ç¯‡ä»‹ç»å®ƒçš„æ–‡ç« ](https://www.sitepoint.com/simple-state-management-nanny-state/)ã€‚å®ƒå°†æ‰€æœ‰åº”ç”¨ç¨‹åºæ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªåä¸º State çš„å¯¹è±¡ä¸­ï¼Œç„¶åæ ¹æ®çŠ¶æ€çš„å˜åŒ–è‡ªåŠ¨é‡æ–°å‘ˆç° HTML è§†å›¾ã€‚ç”±äºå®ƒçš„é€Ÿåº¦å’Œæ•ˆç‡ï¼Œæ²¡æœ‰æ–°çš„è¯­æ³•ï¼Œå®ƒéå¸¸ç®€å•ï¼Œå®¹æ˜“å­¦ä¹ ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å¯¼å…¥ä¿å§†çŠ¶æ€å¹¶è®¾ç½®`State`ã€`View`å’Œ`Update`ã€‚

è¦å¯¼å…¥å®ƒï¼Œæ‚¨åªéœ€å°†è¿™è¡Œä»£ç å¤åˆ¶åˆ°ç¨‹åºçš„ç¬¬ä¸€è¡Œ:

```
import { Nanny,html } from 'https://cdn.skypack.dev/nanny-state' 
```

å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºä½ æ­£åœ¨å¯¼å…¥çš„ä¸œè¥¿ï¼Œä»¥åŠæ‰€æœ‰ä¸œè¥¿çš„ç»“æ„æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä¸€å®šè¦çœ‹çœ‹ä¸Šé¢çš„é“¾æ¥ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºè§†å›¾:

```
const View = state => html` <h1>Numble</h1>` 
```

`View`æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²åŸºæœ¬ä¸Šå°±æ˜¯å°†åœ¨æˆ‘ä»¬çš„é¡µé¢ä¸Šæ˜¾ç¤ºçš„ HTMLã€‚è¿™æ˜¯ä¸€ä¸ªåŸºæœ¬çš„å¸ƒå±€ï¼Œè®©æˆ‘ä»¬å¼€å§‹ï¼Œä¸€æ—¦ä¸€åˆ‡å°±ç»ªï¼Œæ ‡é¢˜â€œæ•°å­—â€åº”è¯¥ä¼šå‡ºç°ã€‚å®ƒå°†`State`ä½œä¸ºä¸€ä¸ªå‚æ•°ï¼Œå…è®¸æˆ‘ä»¬è®¿é—®å­˜å‚¨åœ¨å•ä¸ªå¯¹è±¡ä¸­çš„æ•°æ®ã€‚

ç°åœ¨æˆ‘ä»¬éœ€è¦åˆ›å»ºçŠ¶æ€å¯¹è±¡ï¼Œè¿™æ˜¯å­˜å‚¨ä»»ä½•æ•°æ®çš„åœ°æ–¹ï¼Œä½†æ˜¯ç°åœ¨å®ƒéœ€è¦çš„å”¯ä¸€å±æ€§æ˜¯`View`ï¼Œå°†å®ƒä»¬é“¾æ¥åœ¨ä¸€èµ·ã€‚

```
const State = {
  View
} 
```

æœ€åï¼Œæˆ‘ä»¬éœ€è¦è°ƒç”¨`Nanny`å‡½æ•°ã€‚è¿™å°†å‘ˆç°åˆå§‹è§†å›¾ã€‚æˆ‘ä»¬è¿˜å°†å˜é‡`Update`èµ‹ç»™è¿”å›å€¼ã€‚è¿™å°†å…è®¸æˆ‘ä»¬ç¨åæ›´æ–°çŠ¶æ€ã€‚

```
const Update = Nanny(State) 
```

æ‚¨çš„é¡µé¢åº”è¯¥æ˜¯è¿™æ ·çš„:

![Initial Page](img/5a5d78d5b678abda1e8fa7177efeeb23.png)

ä»£ç çœ‹èµ·æ¥åº”è¯¥æ˜¯è¿™æ ·çš„:

[https://codepen.io/goldenrod/embed/KKoKJNK?height=300&default-tab=html%2Cresult&slug-hash=KKoKJNK&editable=true&user=goldenrod&name=cp_embed_1](https://codepen.io/goldenrod/embed/KKoKJNK?height=300&default-tab=html%2Cresult&slug-hash=KKoKJNK&editable=true&user=goldenrod&name=cp_embed_1)

ç°åœ¨ä¿å§†çŠ¶æ€è®¾ç½®å¥½äº†ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹åˆ¶ä½œæ¸¸æˆäº†ï¼Œåˆ°æœ€ååº”è¯¥æ˜¯ä¸€ä¸ªå…¨åŠŸèƒ½çš„â€œçŒœæ•°å­—â€æ¸¸æˆã€‚

## æ¯ä¸€ä¸ªç»“æŸéƒ½æœ‰ä¸€ä¸ªå¼€å§‹

åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œè¿˜æœ‰ä¸€äº›äº‹æƒ…,`View`å‡½æ•°çš„å¥½å¤„ä¹‹ä¸€æ˜¯å®ƒä½¿ç”¨æ¨¡æ¿æ–‡å­—ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨ HTML æœ¬èº«ä¸­æ·»åŠ é€»è¾‘ã€‚å½“æ‚¨æƒ³è¦åŒ…å«åŸºäºçŠ¶æ€çš„ä¸åŒè§†å›¾æ—¶ï¼Œè¿™éå¸¸æ–¹ä¾¿ã€‚ä¸å¹¸çš„æ˜¯ï¼Œæ ‡å‡†çš„`if`è¯­å¥ä¸èµ·ä½œç”¨ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸‰å…ƒè¿ç®—ç¬¦ã€‚

å¦‚æœæ‚¨è¿˜ä¸ç†Ÿæ‚‰ï¼Œä¸‰å…ƒè¿ç®—ç¬¦çš„å·¥ä½œæ–¹å¼ä¸ if else è¯­å¥ç›¸åŒ:conditionï¼Ÿå¦‚æœæ˜¯çœŸçš„æ€ä¹ˆåŠ:å¦‚æœæ˜¯å‡çš„æ€ä¹ˆåŠã€‚ç®€è¨€ä¹‹ï¼Œç”¨`if`æ¢ä¸€ä¸ª`?`ï¼Œç”¨`else`æ¢ä¸€ä¸ª`:`ã€‚

ä¾‹å¦‚ï¼Œæœ‰ä¸€å¤©æˆ‘åœ¨ Twitter ä¸Šçœ‹åˆ°äº†ä¸€ä¸ªå¾ˆæ£’çš„ä¾‹å­:

```
const toDo = amIHungry ? "ğŸ°" : "ğŸ˜´" 
```

è¿™ç›¸å½“äº:

```
if (amIHungry){
    const toDo = "ğŸ°"
}
else{
    const toDo = "ğŸ˜´"
} 
```

ä¸‰å…ƒè¿ç®—ç¬¦å°†æˆä¸ºä½ æœ€å¥½çš„æœ‹å‹ï¼Œæ‰€ä»¥ç†è§£å®ƒä»¬æ˜¯å¦‚ä½•å·¥ä½œçš„éå¸¸é‡è¦ã€‚

å¼€å§‹æŒ‰é’®æ˜¯ç»™æ¸¸æˆå¢åŠ ä¸€äº›ç»“æ„çš„å¥½æ–¹æ³•ï¼Œå°¤å…¶æ˜¯åƒ Numble è¿™æ ·çš„æ¸¸æˆï¼Œæ‰€ä»¥ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦ç»™`State`ï¼Œ`started`æ·»åŠ ä¸€ä¸ªå±æ€§ã€‚`started`çš„å€¼éœ€è¦æ˜¯`false`ï¼Œå› ä¸ºæˆ‘ä»¬å¸Œæœ›ç”¨æˆ·çœ‹åˆ°çš„ç¬¬ä¸€ä»¶äº‹æ˜¯èœå•é¡µé¢(ç°åœ¨ï¼Œå®ƒå°†ç”±å¼€å§‹æŒ‰é’®å’Œæ ‡é¢˜ç»„æˆ)ã€‚

`State`ç°åœ¨åº”è¯¥æ˜¯è¿™æ ·çš„:

```
const State = {
    started: false,
    start, finish,
    View
} 
```

è¿™é‡Œå˜åŒ–æœ€å¤§çš„æ˜¯`View`,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç¬¬ä¸€ä¸ªä¹Ÿæ˜¯ä¸»è¦çš„ä¸‰å…ƒè¿ç®—ç¬¦ã€‚

æ³¨æ„ï¼Œå®ƒåŒ…æ‹¬ä¸¤ä¸ªå˜é‡`start`å’Œ`finish`ã€‚è¿™äº›æ˜¯å¯¹æˆ‘ä»¬å³å°†ç¼–å†™çš„äº‹ä»¶å¤„ç†ç¨‹åºçš„å¼•ç”¨ã€‚

åœ¨ä¿å§†çŠ¶æ€ä¸‹ï¼Œä»»ä½•äº‹ä»¶å¤„ç†ç¨‹åºéƒ½éœ€è¦åœ¨`State`å¯¹è±¡å†…éƒ¨è¢«å¼•ç”¨ã€‚

æˆ‘ä»¬åŸºæœ¬ä¸Šæƒ³è¦ä¸¤ç§ä¸åŒçš„è§†å›¾:ä¸€ç§æ˜¯ç”¨æˆ·å·²ç»å¼€å§‹çš„è§†å›¾(æ¢å¥è¯è¯´ï¼Œæ¸¸æˆæœ¬èº«)ï¼Œå¦ä¸€ç§æ˜¯ç”¨æˆ·è¿˜æ²¡æœ‰å¼€å§‹çš„è§†å›¾(å¯èƒ½æ˜¯èœå•é¡µé¢)ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æˆ‘ä»¬çš„å¸ƒå°”å±æ€§`started`æ¥åšè¿™ä»¶äº‹ã€‚

```
const View = state => html` <h1>Numble</h1>
${state.started ?
 html`<button onclick=${state.finish}>END</button>`
:
 html`<button onclick=${state.start}>START</button>`
}` 
```

æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œæ ‡é¢˜åœ¨ä¸‰å…ƒè¿ç®—ç¬¦ä¹‹ä¸Šâ€”â€”è¿™æ„å‘³ç€å®ƒåœ¨ç¨‹åºçš„ä¸¤ä¸ªé¡µé¢ä¸Šéƒ½æ˜¯å¯è§çš„ã€‚æ‰€ä»¥å¯¹äºä¸‰å…ƒè¿ç®—ç¬¦ï¼Œä½ å¯èƒ½å·²ç»èƒ½ç¡®åˆ‡åœ°çœ‹åˆ°å®ƒåœ¨åšä»€ä¹ˆï¼Œä½†æ˜¯å¦‚æœä¸èƒ½ï¼Œä¸è¦æ‹…å¿ƒï¼Œè¿™éå¸¸ç®€å•ã€‚

å®ƒéµå¾ªä¸ä¸Šé¢è›‹ç³•/é¥¥é¥¿çš„ä¾‹å­å®Œå…¨ç›¸åŒçš„é€»è¾‘:å®ƒæ£€æŸ¥`state.started`æ˜¯å¦æ˜¯`true`ã€‚å¦‚æœæ˜¯ï¼Œå°†æ˜¾ç¤ºä¸€ä¸ªåä¸ºâ€œç»“æŸâ€çš„æŒ‰é’®ã€‚å¦åˆ™ï¼Œå°†æ˜¾ç¤ºä¸€ä¸ªåä¸ºâ€œå¼€å§‹â€çš„æŒ‰é’®ã€‚

![Start Button](img/7b5578a918b8558c76ef99a19ff274c8.png)

![End Button](img/dba1ff621f32a414ca4c5cee9f7c7627.png)

æŒ‰é’®æœ¬èº«æœ‰å†…è”äº‹ä»¶ç›‘å¬å™¨:â€œå¼€å§‹â€æŒ‰é’®æœ‰ä¸€ä¸ªè°ƒç”¨å‡½æ•°`start`çš„ç›‘å¬å™¨,â€œç»“æŸâ€æŒ‰é’®æœ‰ä¸€ä¸ªè°ƒç”¨å‡½æ•°`finish`çš„ç›‘å¬å™¨ã€‚æ˜¾ç„¶ï¼Œè¿™äº›å‡½æ•°è¿˜ä¸å­˜åœ¨ï¼Œè¿™è®©æˆ‘ä»¬å¼€å§‹ä¸‹ä¸€é¡¹å·¥ä½œ:åˆ›å»ºäº‹ä»¶å¤„ç†ç¨‹åºã€‚

æˆ‘ä»¬å°†é¦–å…ˆæ‰§è¡Œ`start`å‡½æ•°ã€‚è¿™éå¸¸ç®€å•ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯å°†`started`å±æ€§æ›´æ–°ä¸º`true`ã€‚ä»£ç åº”è¯¥å¦‚ä¸‹æ‰€ç¤º:

```
const start = event => Update({started: true}) 
```

è¿™ä½¿ç”¨äº†æˆ‘ä»¬ä¹‹å‰ç¼–å†™çš„`Update`å‡½æ•°ï¼Œå¹¶æ›´æ”¹äº†`State`ï¼Œå› æ­¤`started`çš„å€¼ç°åœ¨æ˜¯`true`ã€‚å½“è¿™ç§æƒ…å†µå‘ç”Ÿæ—¶ï¼Œè§†å›¾å°†è¢«é‡æ–°å‘ˆç°ï¼Œæ˜¾ç¤ºâ€œEndâ€æŒ‰é’®ä½œä¸ºä¸‰å…ƒè¿ç®—ç¬¦çš„ç»“æœã€‚

ä½ å¯èƒ½æƒ³è‡ªå·±è¯•ç€å†™ä¸€ä¸‹`finish`äº‹ä»¶å¤„ç†ç¨‹åºï¼Œå› ä¸ºå®ƒçš„å·¥ä½œæ–¹å¼å‡ ä¹å’Œ`start`å‡½æ•°ä¸€æ ·ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯`Update`å‡½æ•°æ”¹å˜äº†ä»€ä¹ˆã€‚

ä¸‹é¢æ˜¯`finish`å‡½æ•°çš„æ ·å­:

```
const finish = event => Update({started: false}) 
```

å¤ªç¥å¥‡äº†ï¼ä½ ç°åœ¨å¾—åˆ°äº†ä¸–ç•Œä¸Šæœ€æ— èŠçš„æ¸¸æˆï¼

è¯´çœŸçš„ï¼Œä½ ç°åœ¨å¯ä»¥è¯•ç€æŒ‰ä¸‹å¼€å§‹å’Œç»“æŸæŒ‰é’®ï¼Œä¸ä½ çš„æ¸¸æˆäº’åŠ¨ï¼Œå³ä½¿è¿™ä¸æ˜¯æœ€å¼•äººå…¥èƒœçš„ä½“éªŒã€‚

åŒæ ·ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªä»£ç åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­çš„ä¾‹å­:

[https://codepen.io/goldenrod/embed/XWEWORN?height=300&default-tab=html%2Cresult&slug-hash=XWEWORN&editable=true&user=goldenrod&name=cp_embed_2](https://codepen.io/goldenrod/embed/XWEWORN?height=300&default-tab=html%2Cresult&slug-hash=XWEWORN&editable=true&user=goldenrod&name=cp_embed_2)

## æ­¥éª¤ 2:ç”Ÿæˆéšæœºæ•°

æˆ‘ä»¬ç°åœ¨å¯ä»¥ç”¨ Numble æœ€é‡è¦çš„ä¸€ä¸ªæ–¹é¢è®©æˆ‘ä»¬çš„æ¸¸æˆæ›´åˆºæ¿€ä¸€ç‚¹:æ•°å­—æœ¬èº«ã€‚

è¿™ä¸€æ­¥æ¶‰åŠåˆ°ä¸€ç‚¹æ•°å­¦å’Œé€»è¾‘ï¼Œä½†æ˜¯ä¸€æ—¦ä½ æ˜ç™½äº†ï¼Œå®ƒçœŸçš„ä¸ä¼šå¤ªéš¾ã€‚å‡½æ•°æœ¬èº«åº”è¯¥æ˜¯è¿™æ ·çš„(æˆ‘å°†åœ¨ä¸‹é¢è§£é‡Šè¿™æ˜¯æ€ä¹ˆå›äº‹):

```
const generateNumber = () => (3*Math.ceil(Math.random()*299+34)).toString() 
```

è¿™æ˜¯ä¸€ä¸ª arrow å‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ªä¸‰ä½æ•°ï¼Œä¸‰çš„å€æ•°çš„å­—ç¬¦ä¸²ã€‚

å…·ä½“æ¥çœ‹`Math.ceil(Math.random()*299+34)`ï¼Œå®ƒä½¿ç”¨`Math.random()`ç”Ÿæˆä¸€ä¸ªä»‹äº 1 å’Œ 299 ä¹‹é—´çš„éšæœºæ•°ï¼Œå¹¶ä½¿ç”¨`Math.ceil`å°†å…¶å‘ä¸Šèˆå…¥ã€‚æ·»åŠ  34ï¼Œç„¶åä¹˜ä»¥ 3ï¼Œç¡®ä¿è¯¥æ•°å­—æ˜¯ 102 åˆ° 999 ä¹‹é—´çš„ 3 çš„å€æ•°ï¼Œå³ 3 çš„ 3 ä½æ•°å€æ•°ï¼Œæˆ–â€œnumbleâ€ã€‚

æœ€åï¼Œæ•´ä¸ªäº‹æƒ…è¢«åŒ…è£…åœ¨ä¸€ä¸ª`.toString()`å‡½æ•°ä¸­ï¼ŒæŠŠå®ƒå˜æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å°†ä¸€ä¸ªæ•°å­—å­˜å‚¨ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²å¯èƒ½çœ‹èµ·æ¥å¾ˆå¥‡æ€ªï¼Œä½†æ˜¯è¿™å°†ä½¿å¾—åœ¨æ¸¸æˆçš„åé¢ç»™æ¯ä¸ªæ•°å­—ç€è‰²æ›´åŠ å®¹æ˜“ã€‚

æˆ‘ä»¬çš„ä¸‹ä¸€ä¸ªæŒ‘æˆ˜æ˜¯åœ¨ç”¨æˆ·æ¯æ¬¡æŒ‰â€œå¼€å§‹â€æ—¶æ˜¾ç¤ºä¸€ä¸ªæ•°å­—ã€‚

æœ€å¥½çš„æ–¹æ³•æ˜¯ç»™çŠ¶æ€å¯¹è±¡æ·»åŠ ä¸€ä¸ªåä¸º`number`çš„å±æ€§ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬ä¸éœ€è¦åœ¨æœ€åˆçš„`State`ä¸­è¿™æ ·åšï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨â€˜å¼€å§‹â€™æŒ‰é’®è¢«æŒ‰ä¸‹æ—¶è¿™æ ·åšï¼Œæ‰€ä»¥åœ¨`start`äº‹ä»¶å¤„ç†ç¨‹åºä¸­ã€‚

è¿™å°†æ”¹å˜æˆ‘ä»¬çš„`start`å‡½æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
const start = event => Update({
    started: true,
    number: generateNumber()
  }) 
```

æ–°å±æ€§çš„å€¼`number`ï¼Œæ˜¯æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„å‡½æ•°`generateNumber()`çš„è¿”å›å€¼:éšæœºçš„ä¸‰ä½æ•°ï¼Œä¸‰çš„å€æ•°ã€‚

ä¸ºäº†æ˜¾ç¤ºè¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨`View`ä¸­æ·»åŠ ä¸€è¡Œï¼Œç‰¹åˆ«æ˜¯åœ¨å½“`state.started`æ˜¯`true`æ—¶çš„ HTML éƒ¨åˆ†ï¼Œä½¿`View`çœ‹èµ·æ¥åƒè¿™æ ·:

```
const View = state => html` <h1>Numble</h1>
${state.started ?
 html`<div id="number">${state.number}</div>
 <button onclick=${state.finish}>END</button>`
:
 html`<button onclick=${state.start}>START</button>`
}` 
```

æˆ‘ä»¬åœ¨è¿™é‡Œæ‰€åšçš„å°±æ˜¯æ·»åŠ ä¸€ä¸ª`<div>`å’Œä¸€ä¸ª`id`çš„`"number"`ï¼Œå®ƒæ˜¾ç¤ºçš„`state.number`æ˜¯éšæœºç”Ÿæˆçš„ä¸‰ä½æ•°ï¼Œæ˜¯ä¸‰çš„å€æ•°ã€‚

å¦‚æœæ‚¨ç°åœ¨æµ‹è¯•ä»£ç ï¼Œæ‚¨å°†èƒ½å¤Ÿåœ¨æ¯æ¬¡å•å‡»â€œå¼€å§‹â€æŒ‰é’®æ—¶çœ‹åˆ°ä¸åŒçš„æ•°å­—ï¼Œå¦‚æœæ‚¨å°†è¿™äº›æ•°å­—ç›¸åŠ ï¼Œæ‚¨ä¼šå‘ç°è¿™äº›æ•°å­—æ˜¯ 3 çš„å€æ•°ï¼

å¯¹ç…§æˆ‘çš„ CodePen æ¼”ç¤ºæ£€æŸ¥ä½ çš„ä»£ç ã€‚

[https://codepen.io/goldenrod/embed/MWVWLoK?height=300&default-tab=html%2Cresult&slug-hash=MWVWLoK&editable=true&user=goldenrod&name=cp_embed_3](https://codepen.io/goldenrod/embed/MWVWLoK?height=300&default-tab=html%2Cresult&slug-hash=MWVWLoK&editable=true&user=goldenrod&name=cp_embed_3)

## æ­¥éª¤ 3:è¾“å…¥å’Œé”®ç›˜

ç°åœ¨äº‹æƒ…å¼€å§‹å˜å¾—æœ‰ç‚¹æ£˜æ‰‹ï¼Œåœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œæ£€æŸ¥ä¸€ä¸‹æ‚¨æ˜¯å¦ç†Ÿæ‚‰`Array.map()`å‡½æ•°å¯èƒ½æ˜¯ä¸ªå¥½ä¸»æ„ã€‚åƒä¸‰å…ƒè¿ç®—ç¬¦ä¸€æ ·ï¼Œåœ¨è¿™ä¸€æ­¥å’Œä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œå®ƒä»¬å°†æˆä¸ºæ‚¨æœ€å¥½çš„æœ‹å‹ï¼Œå› ä¸º Numble éœ€è¦å¤§é‡æ•°ç»„æ˜ å°„æ¥å¤„ç†çŠ¶æ€ä¸­çš„æ•°æ®ã€‚

å¦‚æœä½ çš„æŠ€èƒ½æœ‰äº›ç”Ÿç–æˆ–è€…ä½ ç”šè‡³æ²¡æœ‰å¬è¯´è¿‡ï¼Œä¸è¦æ‹…å¿ƒï¼Œå®ƒä»¬å¾ˆå®¹æ˜“ç†è§£ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œé˜…è¯»æ›´å¤šå…³äºå®ƒä»¬çš„å†…å®¹ã€‚

è¿™ä¸€æ­¥æœ‰ä¸‰ä¸ªä¸»è¦éƒ¨åˆ†:

*   åˆ›å»ºè™šæ‹Ÿé”®ç›˜
*   æ˜¾ç¤ºç”¨æˆ·çš„çŒœæµ‹
*   æ£€æŸ¥ç”¨æˆ·çš„çŒœæµ‹æ˜¯å¦æ­£ç¡®

å°½ç®¡å®ƒä»¬éƒ½æ˜¯ç›¸äº’ä¾èµ–çš„ï¼Œä½†æ˜¯å¦‚æœä½ æŠŠæ‰€æœ‰çš„ä¸œè¥¿åˆ†è§£æˆæ›´å°çš„å—ï¼Œå°±æ›´å®¹æ˜“ç†è§£äº†ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨`State`ä¸­æ·»åŠ æˆ‘ä»¬å°†è¦ä½¿ç”¨çš„å‡½æ•°å’Œå¦å¤–ä¸‰ä¸ªå±æ€§:

```
const State = {
  started: false,
  digits: Array(10).fill("grey"),
  guess: Array(3).fill(null),
  count: 0,
  start, finish, remove, check, appear,
  View
} 
```

æŒ‰ç…§è¿™ä¸ªé¡ºåºå¤„ç†å®ƒä»¬ï¼Œ`digits`çš„å€¼ç°åœ¨æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º 10 çš„æ•°ç»„ï¼Œæ¯ä¸ªç©ºæ ¼éƒ½ç”¨å­—ç¬¦ä¸²â€œgreyâ€å¡«å……ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬å°†ä½¿ç”¨å®ƒæ¥è·Ÿè¸ªæ¸¸æˆä¸­æ¯ä¸ªæ•°å­—åº”è¯¥æ˜¯ä»€ä¹ˆé¢œè‰²ï¼Œæ•°ç»„çš„ç´¢å¼•å°†ä»£è¡¨ 0-9 ä¹‹é—´çš„æ¯ä¸ªå¯èƒ½çš„æ•°å­—ã€‚

`guess`çš„åˆå§‹å€¼ä¹Ÿæ˜¯ä¸€ä¸ªé•¿åº¦ä¸º 3 çš„æ•°ç»„ï¼Œæ¯ä¸ªç©ºæ ¼ç”¨`null`å¡«å……ã€‚

æœ€åï¼Œ`count`è¢«è®¾ç½®ä¸º 0ï¼Œè¿™å°†ç”¨äºè®°å½•ç©å®¶å·²ç»çŒœåˆ°äº†å¤šå°‘ä½æ•°ã€‚

æˆ‘ä»¬å°†æ˜ å°„`digits`æ•°ç»„æ¥åˆ›å»ºæˆ‘ä»¬çš„å±å¹•é”®ç›˜ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç»™`View`æ·»åŠ ä¸€äº›ä¸œè¥¿ã€‚å°½ç®¡åœ¨æˆ‘ä»¬è¿™ä¹ˆåšä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å»æ‰æ˜¾ç¤º`number`çš„`<div>`ï¼Œå¦åˆ™è¿™å°±è¿èƒŒäº†æ¸¸æˆçš„å…¨éƒ¨æ„ä¹‰ã€‚

```
const View = state => html` <h1>Numble</h1>
${state.started ?
 html`<div id="guesses">
${state.guess.map(number => html`<div>${number}</div>`)}
</div>
<div id="keyboard">
 ${state.digits.map((digit,index) => html`<button onclick=${appear(index)}>${index}</button>`)}
 <button onclick=${remove}>DELETE</button>
 <button onclick=${check}>ENTER</button>
</div>
<button onclick=${finish}>END</button>`
:
 html`<button onclick=${start}>START</button>`
}` 
```

ä»£æ›¿æ˜¾ç¤º`number`çš„`<div>`ï¼Œæˆ‘ä»¬ç°åœ¨æœ‰ä¸¤ä¸ª`<div>`ï¼Œä¸€ä¸ªæœ‰`"guesses"`çš„`id`ï¼Œä¸€ä¸ªæœ‰`"keyboard"`çš„`id`ã€‚

åœ¨â€œguessâ€`<div>`ä¸­ï¼Œæˆ‘ä»¬æœ‰è®¸å¤š`.map()`å‡½æ•°ä¸­çš„ç¬¬ä¸€ä¸ªï¼Œå®ƒæ˜ å°„åˆ°é•¿åº¦ä¸º 3 çš„æ•°ç»„ï¼Œä¸ºæ•°ç»„ä¸­çš„æ¯ä¸€é¡¹åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„`<div>`ï¼Œæ˜¾ç¤ºè¯¥é¡¹ã€‚è¿™æ„å‘³ç€åœ¨å¼€å§‹æ—¶ï¼Œå½“æ•°ç»„ä¸­æ‰€æœ‰é¡¹çš„å€¼éƒ½æ˜¯`null`æ—¶ï¼Œå°†ä¼šæ˜¾ç¤ºä¸‰ä¸ªç©ºæ ¼ã€‚

ä¸‹é¢æ˜¯å®ƒåº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­çš„ä¸€ä¸ªä¾‹å­(ç”¨æˆ‘çš„ CSS):

![Numble 1 Grid](img/cbc14c8e8cedc64a111b10383623f1cd.png)

æœ€ç»ˆï¼Œå½“æ•°ç»„ä¸­æ¯ä¸€é¡¹çš„å€¼æ”¹å˜æ—¶ï¼Œæ˜¾ç¤ºçš„å†…å®¹ä¹Ÿå°†éšä¹‹æ”¹å˜ã€‚

è€Œåœ¨â€˜é”®ç›˜â€™å†…`<div>`æˆ‘ä»¬æœ‰ä¸‰æ ·ä¸œè¥¿:

```
${state.digits.map((digit,index) => html`<button onclick=${state.appear(index)}>${index}</button>`)} 
```

è¿™æ˜ å°„åˆ°é•¿åº¦ä¸º 10 çš„æ•°ç»„ï¼Œä¸ºæ¯ä¸ªé¡¹ç›®åˆ›å»ºä¸€ä¸ªæŒ‰é’®å¹¶æ˜¾ç¤ºæ¯ä¸ªé¡¹ç›®çš„`index`ã€‚æ¢å¥è¯è¯´ï¼Œæ•°å­— 0 åˆ° 9ã€‚æ¯ä¸ªæŒ‰é’®è¿˜æœ‰ä¸€ä¸ªå†…è”äº‹ä»¶ç›‘å¬å™¨ï¼Œå®ƒè°ƒç”¨äº‹ä»¶å¤„ç†ç¨‹åº`appear`å¹¶æä¾›`index`ä½œä¸ºå‚æ•°ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å°†åœ¨ç¨åå¯¹æ­¤è¿›è¡Œå…¨é¢æ¢è®¨ã€‚

ç„¶åï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªæŒ‰é’®ï¼Œä¸€ä¸ªå«â€œåˆ é™¤â€ï¼Œå¦ä¸€ä¸ªå«â€œè¾“å…¥â€ã€‚å®ƒä»¬éƒ½æœ‰è°ƒç”¨å„è‡ªäº‹ä»¶å¤„ç†ç¨‹åº`remove`å’Œ`check`çš„å†…è”äº‹ä»¶ç›‘å¬å™¨ã€‚åŒæ ·ï¼Œæˆ‘ä»¬ç¨åå°†å…¨é¢æ¢è®¨è¿™äº›é—®é¢˜ã€‚

é¦–å…ˆï¼Œè¿™æ˜¯ä¸€ä¸ªä½ çš„é”®ç›˜çœ‹èµ·æ¥åƒä»€ä¹ˆçš„ä¾‹å­:

![Numble Keyboard](img/699919915556a2e4df9b7546b5e2fd13.png)

æŸ¥çœ‹`appear`äº‹ä»¶å¤„ç†ç¨‹åºï¼Œæˆ‘ä»¬å¸Œæœ›è¿™ä¸ªå‡½æ•°æ˜¾ç¤ºç©å®¶ç‚¹å‡»è¿›å…¥`guess`ç¬¬ä¸€ä¸ªç©ºæ ¼çš„æ•°å­—ã€‚

```
const appear = guess => event => {
  Update(state => ({
    guess: state.guess.map((digit,index) => index === state.count ? guess : digit),
    count: state.count + 1
  }))
} 
```

é¦–å…ˆï¼Œè¿™ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºå’Œæˆ‘ä»¬ä¹‹å‰åšçš„å”¯ä¸€åŒºåˆ«å°±æ˜¯è¿™ä¸ªå‡½æ•°å¤šäº†ä¸€ä¸ªå‚æ•°`guess`ã€‚è¿™æ˜¯ä½œä¸ºå‚æ•°æä¾›çš„`digits`æ•°ç»„çš„`index`ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒæ˜¯ç©å®¶ç‚¹å‡»çš„æ•°å­—ã€‚

`Update`å‡½æ•°çœ‹èµ·æ¥æœ‰ç‚¹ä¸åŒã€‚è¿™æ˜¯å› ä¸ºå®ƒéœ€è¦è®¿é—®çŠ¶æ€ï¼Œæ‰€ä»¥ä¸ºå®ƒæä¾›äº†ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œå°†æ—§çŠ¶æ€æ˜ å°„åˆ°æ–°çŠ¶æ€(ä¿å§†çŠ¶æ€å°†è¿™äº›ç§°ä¸ºâ€œè½¬æ¢å‡½æ•°â€)

å°±å…¶å®é™…æ›´æ–°çš„å†…å®¹è€Œè¨€ï¼Œ`guess`å±æ€§æ˜ å°„åˆ°ä¸‰ä¸ª`null`çš„åŸå§‹æ•°ç»„ï¼Œå¦‚æœè¯¥é¡¹çš„`index`ç­‰äº`count`(çŒœæµ‹çš„ä½ç½®)ï¼Œåˆ™`null`çš„å€¼è¢«æ›¿æ¢ä¸º`guess`(è¿™å°†æ˜¯ç”¨æˆ·å•å‡»çš„æŒ‰é’®çš„ç¼–å·)ã€‚å¦‚æœ`index`ä¸ç­‰äº`count`ï¼Œåˆ™è¯¥é¡¹ç›®çš„å€¼ä¿æŒä¸å˜:`null`ã€‚

ç„¶åå®ƒå°†`count`å¢åŠ  1ï¼Œå…è®¸ç”¨æˆ·åœ¨ç¬¬äºŒä¸ªç©ºæ ¼ä¸­è¾“å…¥ä»–ä»¬çš„ç¬¬äºŒä¸ªçŒœæµ‹ã€‚

è¿™æ˜¯ç”¨æˆ·å•å‡»å‡ ä¸ªæ•°å­—åè¯¥è¡Œçš„å¤–è§‚:

![Numble Filled Grid](img/7807a8ab5a7f430af1612f3373bceae1.png)

å…·æœ‰è®½åˆºæ„å‘³çš„æ˜¯,`remove`äº‹ä»¶å¤„ç†ç¨‹åºå‡ ä¹å®Œå…¨ç›¸åŒ:

```
const remove = event => {
  Update(state => ({
    guess: state.guess.map((digit,index) => index === state.count - 1 ? null : digit),
    count: state.count - 1
  }))
} 
```

æŒ‰ç…§`appear`å‡½æ•°çš„é€»è¾‘ï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿç®—å‡ºè¿™é‡Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰ä¹Ÿä¸ç”¨æ‹…å¿ƒã€‚å®ƒé€šè¿‡æ˜ å°„åŸå§‹æ•°ç»„æ¥æ›´æ–°`guess`ï¼Œå¦‚æœ`index`ç­‰äºä¹‹å‰çš„çŒœæµ‹æ¬¡æ•°(å³ countâ€“1)ï¼Œå®ƒä¼šç”¨`null`æ›¿æ¢è¯¥é¡¹çš„å€¼ï¼Œä»è€Œæœ‰æ•ˆåœ°åˆ é™¤çŒœæµ‹ã€‚

è¿™ä¸€æ¬¡ï¼Œå®ƒå°†`count`å‡ 1ï¼Œå…è®¸ç”¨æˆ·ç»§ç»­çŒœæµ‹ã€‚

åªéœ€ä½¿ç”¨`check`åŠŸèƒ½ã€‚

â€œè¾“å…¥â€æŒ‰é’®çš„äº‹ä»¶å¤„ç†ç¨‹åºç§°ä¸º`check`ï¼Œæˆ‘ä»¬å¸Œæœ›å®ƒ(æ„å¤–åœ°)æ£€æŸ¥ç”¨æˆ·çš„çŒœæµ‹æ˜¯å¦æ­£ç¡®ï¼Œä½†æˆ‘ä»¬ä¹Ÿå¸Œæœ›å®ƒé‡ç½®çŒœæµ‹ï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥å†è¯•ä¸€æ¬¡ã€‚

è¯¥å‡½æ•°å¦‚ä¸‹æ‰€ç¤º:

```
const check = event => {
  Update(state => {
    const numble = state.guess.join("") === state.number
    return {
      feedback: numble ? "NUMBLE!" : "Wrong!",
      guess: Array(3).fill(null),
      count: 0
    }
  })
} 
```

åƒä»¥å‰ä¸€æ ·ï¼Œ`Update`ä½¿ç”¨äº†ä¸€ä¸ª transformer å‡½æ•°ï¼Œå¹¶å°†`state`ä½œä¸ºä¸€ä¸ªå‚æ•°ï¼Œè®©æˆ‘ä»¬å¯ä»¥ç›´æ¥è®¿é—®çŠ¶æ€ä¸­ä¿å­˜çš„æ‰€æœ‰åº”ç”¨ç¨‹åºæ•°æ®ã€‚ç„¶åå®ƒåˆ›å»ºä¸€ä¸ªåä¸º`numble`çš„å¸ƒå°”å¸¸é‡ã€‚å®ƒå¯èƒ½çœ‹èµ·æ¥ä¸åƒï¼Œä½†`state.guess.join("") === state.number`å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ¡ä»¶(æ£€æŸ¥ç”¨æˆ·çš„çŒœæµ‹æ˜¯å¦ç­‰äºæˆ‘ä»¬ç”Ÿæˆçš„æ•°å­—)ï¼Œå¦‚æœå®ƒæ»¡è¶³è¿™ä¸ªæ¡ä»¶ï¼Œ`numble`çš„å€¼å°†æ˜¯`true`ï¼Œå¦‚æœä¸æ»¡è¶³ï¼Œå®ƒå°†æ˜¯`false`ã€‚

ç„¶åï¼Œå®ƒè¿”å›çŠ¶æ€çš„ä¸‰ä¸ªæ›´æ–°å±æ€§:

*   `feedback`è·å–æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„å¸ƒå°”å€¼ï¼Œå¦‚æœå®ƒæ˜¯`true`,å®ƒå°†è¯¥å€¼è®¾ç½®ä¸ºå­—ç¬¦ä¸²â€œNUMBLEï¼â€å¦‚æœæ˜¯`false`ï¼Œå®ƒå°†æŠŠå€¼è®¾ç½®ä¸ºå­—ç¬¦ä¸²â€œé”™è¯¯ï¼â€
*   `guess`å˜å›ç”¨`null`å¡«å……çš„é•¿åº¦ä¸º 3 çš„æ•°ç»„ã€‚è¿™å°†æœ‰æ•ˆåœ°é‡ç½®ç”¨æˆ·çš„çŒœæµ‹ï¼Œå…è®¸ä»–ä»¬å†æ¬¡çŒœæµ‹
*   `count`ä¹Ÿè¢«é‡ç½®ä¸º 0ï¼Œè¿™æ„å‘³ç€ç¨‹åºå¯ä»¥åƒä»å¤´å¼€å§‹ä¸€æ ·å·¥ä½œã€‚

æˆ‘ä»¬çš„æœ€åä¸€æ­¥æ˜¯åœ¨`View`ä¸­æ”¾ä¸€äº› HTMLï¼Œè¿™æ ·å°±å¯ä»¥æ˜¾ç¤ºåé¦ˆã€‚

ä¸€ä¸ªå¾ˆå¥½çš„æ”¾ç½®ä½ç½®æ˜¯åœ¨çŒœæµ‹çš„ä¸‹æ–¹å’Œé”®ç›˜çš„ä¸Šæ–¹ã€‚æ‰€ä»¥ï¼Œä½ çš„æœ€ç»ˆ`View`åº”è¯¥æ˜¯è¿™æ ·çš„:

```
const View = state => html` <h1>Numble</h1>
${state.started ?
 html`<div id="guesses">
${state.guess.map(number => html`<div>${number}</div>`)}
</div>
<p id="feedback">${state.feedback}</p>
<div id="keyboard">
${state.digits.map((digit,index) => html`<button onclick=${state.appear(index)}>${index}</button>`)}
  <button onclick=${state.remove}>DELETE</button>
  <button onclick=${state.check}>ENTER</button>
</div>
 <button onclick=${state.finish}>END</button>`
:
 html`<button onclick=${state.start}>START</button>`
}` 
```

å¦‚æœä½ æ„¿æ„ï¼Œä½ å¯ä»¥ä½¿ç”¨`feedback`åœ¨æ¸¸æˆå¼€å§‹æ—¶è®¾ç½®ä¸€æ¡æ¶ˆæ¯ï¼Œä¾‹å¦‚åœ¨`start`äº‹ä»¶å¤„ç†ç¨‹åºä¸­ï¼Œä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªå¸¦æœ‰å­—ç¬¦ä¸²å€¼çš„`feedback`å±æ€§(â€œçŒœ 3 ä½æ•°â€):

```
const start = event => {
  Update({
    started: true,
    number: generateNumber(),
    feedback: "Guess 3 digits"
  })
} 
```

å°±æ˜¯è¿™æ ·ï¼ä½ ç°åœ¨æœ‰ä¸€ä¸ªå…¨åŠŸèƒ½çš„çŒœæ•°å­—æ¸¸æˆï¼

åœ¨é˜…è¯»ç¬¬äºŒç¯‡æ–‡ç« ä¹‹å‰ï¼Œæœ‰ä¸€äº›å…³äº CSS å’Œ bug çš„æ³¨æ„äº‹é¡¹ã€‚

å¦‚æœä½ æƒ³æ·»åŠ ä½ è‡ªå·±çš„ CSSï¼Œé‚£å¾ˆå¥½ï¼Œä½†æ˜¯å¦‚æœä½ åªæƒ³ä¸“æ³¨äºä»£ç ï¼Œä½ å¯ä»¥ä»æœ€ç»ˆçš„ CodePen æ¼”ç¤ºä¸­å¤åˆ¶æˆ‘çš„ CSSã€‚

[https://codepen.io/goldenrod/embed/xxWxBYm?height=300&default-tab=html%2Cresult&slug-hash=xxWxBYm&editable=true&user=goldenrod&name=cp_embed_4](https://codepen.io/goldenrod/embed/xxWxBYm?height=300&default-tab=html%2Cresult&slug-hash=xxWxBYm&editable=true&user=goldenrod&name=cp_embed_4)

å¦‚æœä½ æ˜¯ä¸€ä¸ªä¼˜ç§€çš„ç¨‹åºå‘˜ï¼Œä½ å¯èƒ½ä¼šå‘ç°è¿™é‡Œçš„ä¸€äº›é”™è¯¯ï¼Œä¾‹å¦‚ï¼Œå¦‚æœç”¨æˆ·åœ¨çŒœåˆ°ä¸‰ä½æ•°ä¹‹å‰å°±ç‚¹å‡»äº†â€œå›è½¦â€è¯¥æ€ä¹ˆåŠï¼Ÿå¦‚æœä½ å¼€å§‹ç©å®ƒï¼Œä½ è‚¯å®šèƒ½æ³¨æ„åˆ°æ›´å¤šã€‚

å®ƒä»¬ä¸€ç‚¹ä¹Ÿä¸éš¾ä¿®å¤ï¼Œæ‚¨åªéœ€è¦åœ¨é€‚å½“çš„æ—¶å€™æ»¡è¶³å‡ ä¸ªæ¡ä»¶ã€‚ä¾‹å¦‚ï¼Œä¸ºäº†è§£å†³ä¸‰ä½æ•°ä¹‹å‰çš„æ£€æŸ¥é—®é¢˜ï¼Œåœ¨`check`å‡½æ•°ä¸­ï¼Œæ‚¨å¯ä»¥ç¼–å†™:

```
const check = event => {
  Update(state => {
    const numble = state.guess.join("") === state.number
    return state.count < 3 ? {
      feedback: "too short"
    }
    :
    {
      feedback: numble ? "NUMBLE!" : "Wrong!",
      guess: Array(3).fill(null),
      count: 0
    } 
  })
} 
```

è¿™åªæ˜¯æ£€æŸ¥çŒœæµ‹çš„æ¬¡æ•°æ˜¯å¦å°äº 3ï¼Œå¹¶ç›¸åº”åœ°è¿”å›å…·æœ‰ä¸åŒå€¼çš„ä¸åŒå±æ€§ã€‚

æˆ‘ä»¬ç°åœ¨æœ‰äº†ä¸€ä¸ªå…¨åŠŸèƒ½çš„â€œçŒœæ•°å­—â€æ¸¸æˆï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†ä½¿å®ƒæ›´åƒå®Œæ•´çš„æ•°å­—ã€‚

## å››æ¬¡çŒœæµ‹

æˆ‘ä»¬çš„ç¬¬ä¸€é¡¹å·¥ä½œæ˜¯å…è®¸ç”¨æˆ·çŒœ 4 æ¬¡ã€‚åœ¨ Wordle ä¸­ï¼Œä¸€ä¸ª 5 ä¸ªå­—æ¯çš„å•è¯å¯ä»¥çŒœ 6 æ¬¡ï¼Œæ‰€ä»¥å¯¹äº Numbleï¼Œæˆ‘ä»¬å°†å…è®¸ä¸€ä¸ª 3 ä½æ•°çš„æ•°å­—çŒœ 4 æ¬¡ã€‚

ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¿…é¡»ç§»é™¤`guess`å±æ€§ï¼Œå¹¶å‘`State`å¯¹è±¡æ·»åŠ ä¸¤ä¸ªå±æ€§:

```
const State = {
  started: false,
  digits: Array(10).fill("grey"),
  guesses: Array(4).fill(Array(3).fill(null)),
  guessCount: 0,
  count: 0,
  start, finish, check, appear, remove,
  View
} 
```

å¦‚æ‚¨æ‰€è§ï¼Œæˆ‘ä»¬ç°åœ¨æœ‰äº†ä¸€ä¸ª`guesses`å±æ€§æ¥ä»£æ›¿ä¹‹å‰çš„`guess`ã€‚`guesses`çš„å€¼æ˜¯ä¸€ä¸ª 2D æ•°ç»„ï¼Œæœ‰ 4 ä¸ªæ•°ç»„ï¼Œæ¯ä¸ªé•¿åº¦ä¸º 3ï¼Œç”¨`null`å¡«å……ã€‚å¦‚æœä½ ä¸ç†Ÿæ‚‰`Array.fill()`å‡½æ•°ï¼Œè¿™æ˜¯åˆ›å»ºä¸€ä¸ªæ•°ç»„çš„æ·å¾„ï¼Œæ„å‘³ç€æˆ‘ä»¬ä¸å¿…å†™å‡ºå®Œæ•´çš„æ•°ç»„ã€‚

4 ä¸ªåµŒå¥—æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªéƒ½ä»£è¡¨ç”¨æˆ·å°†åšå‡ºçš„ 4 ä¸ªçŒœæµ‹ä¸­çš„ä¸€ä¸ªã€‚ä¾‹å¦‚ï¼Œå¦‚æœç¬¬ä¸€æ¬¡çŒœæµ‹æ˜¯ 123ï¼Œ`guesses`æ•°ç»„å°†å¦‚ä¸‹æ‰€ç¤º:

```
[[1,2,3], [null, null, null], [null, null, null], [null, null, null]] 
```

æ¯å½“ç”¨æˆ·åšå‡ºä¸€ä¸ªçŒœæµ‹ï¼Œè¿™ä¸ªæ•°ç»„å°†è¢«æ›´æ–°ä»¥åŒ¹é…ä»–ä»¬çš„çŒœæµ‹ï¼Œæœ‰æ•ˆåœ°è®°å½•ä»–ä»¬åœ¨æ¸¸æˆä¸­åšå‡ºçš„æ‰€æœ‰çŒœæµ‹ã€‚

æ­¤å¤–ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå€¼ä¸º 0 çš„å±æ€§`guessCount`ã€‚è™½ç„¶ç±»ä¼¼äº`count`å±æ€§ï¼Œä½†å®ƒå°†å…è®¸æˆ‘ä»¬è·Ÿè¸ªç”¨æˆ·çŒœæµ‹çš„æ¬¡æ•°ã€‚

è¯¥å›¾å°†å¸®åŠ©æ‚¨å½¢è±¡åŒ–å¹¶å®Œå…¨ç†è§£å¯¹`count`å’Œ`guessCount`å±æ€§çš„éœ€æ±‚:

![Annotated Numble Grid](img/d3ae67635c2937a8edadf7a3babedec7.png)

å¦‚æ‚¨æ‰€è§ï¼Œ`guessCount`æ˜¯å­˜å‚¨çŒœæµ‹çš„åµŒå¥—æ•°ç»„çš„ç´¢å¼•ï¼Œ`count`æ˜¯æ¯ä¸ªçŒœæµ‹çš„æ¯ä¸ªæ•°å­—çš„ç´¢å¼•ã€‚

ç°åœ¨æˆ‘ä»¬éœ€è¦å¯¹`View`å‡½æ•°åšä¸€äº›ä¿®æ”¹:

```
const View = state => html` <h1>Numble</h1>
${state.started ?
 html`<div id="guesses">
${state.guesses.map((guess, i) => html`<div class="row">${guess.map((number,j)=> html`<div class="grey">${number}</div>`)}</div>`)}
</div>
<p id="feedback">${state.feedback}</p>
<div id="keyboard">
${state.digits.map((digit,index) => html`<button onclick=${state.appear(index)}>${index}</button>`)}
  <button onclick=${state.remove}>DELETE</button>
  <button onclick=${state.check}>ENTER</button>
</div>
 <button onclick=${state.finish}>END</button>`
:
 html`<button onclick=${state.start}>START</button>`
}` 
```

è¿™ä¸æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„`View`å‡ ä¹ç›¸åŒï¼Œä½†æ˜¯ id ä¸ºâ€˜guessâ€™çš„ div å·²ç»æ”¹å˜ã€‚äº‹å®ä¸Šï¼Œæˆ‘ä»¬ç°åœ¨ä½¿ç”¨ä¸€ä¸ª 2D æ•°ç»„æ¥æ˜¾ç¤ºåƒç½‘æ ¼ä¸€æ ·çš„ 4 ä¸ªçŒœæµ‹ï¼Œæˆ‘ä»¬å°†éœ€è¦ä¸€ä¸ªåµŒå¥—çš„åœ°å›¾ã€‚

ç¼–ç æç¤º:å½“ä½¿ç”¨åµŒå¥—æ˜ å°„æ—¶ï¼Œå¯¹äºæ¯ä¸ªæ˜ å°„çš„ç´¢å¼•ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨`i`ä½œä¸ºç¬¬ä¸€ä¸ªæ˜ å°„ï¼Œä½¿ç”¨`j`ä½œä¸ºç¬¬äºŒä¸ªæ˜ å°„ã€‚ä½ å¯ä»¥ç”¨ä»»ä½•ä½ è®¤ä¸ºå¯¹ä½ æ¥è¯´æœ€å®¹æ˜“çš„ï¼Œåªè¦å®ƒä»¬ä¸ä¸€æ ·ï¼

ç¬¬ä¸€ä¸ªåœ°å›¾å°†æ¯ä¸ªçŒœæµ‹å¾ªç¯ä¸ºç½‘æ ¼çš„ä¸€è¡Œã€‚ç„¶åï¼Œç¬¬äºŒä¸ªæ˜ å°„å¾ªç¯éå†è¯¥çŒœæµ‹çš„æ¯ä¸ªæ•°å­—ï¼Œå¹¶æ˜¾ç¤ºç›¸å…³çš„ HTML ä»¥æ˜¾ç¤ºå·²è¢«çŒœæµ‹çš„æ•°å­—æˆ–ä¸€ä¸ªç©ºåœ†åœˆã€‚æœ‰äº†è¿™ä¸ªï¼Œä½ çš„å±å¹•åº”è¯¥æ˜¯è¿™æ ·çš„:

![Numble Grid](img/7016544d5ca32f7982a2cfdc1abd5784.png)

è¿™ç§æ–°å¸ƒå±€æ„å‘³ç€æˆ‘ä»¬è¿˜å¿…é¡»æ”¹å˜`appear`å’Œ`remove`åŠŸèƒ½ã€‚è¿™æ˜¯ç›¸å¯¹ç®€å•çš„ï¼Œä½†åŒæ ·éœ€è¦ä¸€ä¸ªåŒåœ°å›¾ã€‚

```
const appear = guess => event => {
  Update(state => ({
    guesses:  state.guesses.map((array,i) => i === state.guessCount ? array.map((digit,j) => j === state.count ? guess : digit) : array) ,
  count: state.count + 1 
  }))
} 
```

æˆ‘ä»¬åœ¨è¿™é‡Œæ›´æ–°äº†`guesses`å±æ€§ï¼Œè¿™å°±æ˜¯æ‹¥æœ‰ä¸¤ä¸ªä¸åŒçš„`count`å±æ€§å˜å¾—éå¸¸æœ‰ç”¨çš„åœ°æ–¹ã€‚

ç¬¬ä¸€ä¸ªæ˜ å°„æ£€æŸ¥è¦æ›´æ”¹å“ªä¸€è¡Œ:å¦‚æœæ•°ç»„çš„ç´¢å¼•ä¸ç”¨æˆ·çš„çŒœæµ‹ç›¸åŒ¹é…ï¼Œåˆ™å¯ä»¥è¿›è¡Œç¬¬äºŒä¸ªæ˜ å°„ï¼Œå¦åˆ™ä¿æŒå€¼ä¸å˜ã€‚

ç¬¬äºŒä¸ªåœ°å›¾æ‰§è¡Œä¸æˆ‘ä»¬åœ¨ç¬¬äºŒç¯‡æ–‡ç« ä¸­åˆ›å»ºçš„`appear`å®Œå…¨ç›¸åŒçš„é€»è¾‘ã€‚

å°±åƒä¹‹å‰ä¸€æ ·ï¼Œ`remove`å‡½æ•°çš„å·¥ä½œæ–¹å¼å‡ ä¹ç›¸åŒã€‚

```
const remove = event => {
  Update(state => ({
    guesses: state.guesses.map((array,i) => i === state.guessCount ? array.map((digit,j)=> j === state.count - 1 ? null : digit) : array),
    count: state.count - 1
  }))
} 
```

è¿™é‡Œçš„ç¬¬ä¸€ä¸ªæ˜ å°„ä¹Ÿåªæ˜¯è¯†åˆ«ç”¨æˆ·æ­£åœ¨è¿›è¡Œçš„çŒœæµ‹ï¼Œç¬¬äºŒä¸ªæ˜ å°„éµå¾ªä¸æˆ‘ä»¬æœ€åˆçš„`remove`å‡½æ•°ç›¸åŒçš„é€»è¾‘ã€‚

ç„¶è€Œ,`count`å±æ€§é€’å‡ï¼Œä»¥ç¡®ä¿ç”¨æˆ·å¯ä»¥é‡æ–°çŒœæµ‹ã€‚

æœ€åï¼Œæˆ‘ä»¬éœ€è¦å¯¹`check`å‡½æ•°è¿›è¡Œä¸€äº›ä¿®æ”¹ã€‚è¿™æ˜¯ç”¨æˆ·æ¯æ¬¡æäº¤çŒœæµ‹æ—¶è¿è¡Œçš„å‡½æ•°ã€‚

```
const check = event => {
  Update(state => {
    const numble = state.guesses[state.guessCount].join("") === state.number
    return {
      feedback: numble ? "NUMBLE!" : state.guessCount < 3 ? "Keep going..." : `Nope! It was ${state.number}`,
      guessCount: state.guessCount + 1,
      count: 0
    }
  })
} 
```

è¿™é‡Œåªæ”¹å˜äº†ä¸¤ä»¶äº‹ï¼Œè€Œä¸”éƒ½åœ¨è¿”å›çš„å¯¹è±¡ä¸­ã€‚å±æ€§å¢åŠ äº†ä¸€äº›é€»è¾‘ï¼Œä½¿åº”ç”¨ç¨‹åºæ›´å…·åŠ¨æ€æ€§ã€‚åé¦ˆç°åœ¨å°†æ˜¾ç¤ºä¸€æ¡æ¶ˆæ¯ï¼Œè®©ç”¨æˆ·çŸ¥é“ä»–ä»¬è¿›å±•å¦‚ä½•ã€‚

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æœ‰:å¦‚æœ`numble`æ˜¯`true`ï¼Œæ¢å¥è¯è¯´ï¼Œå¦‚æœç”¨æˆ·çš„çŒœæµ‹æ˜¯æ­£ç¡®çš„ï¼Œåé¦ˆå˜æˆâ€œNUMBLEâ€ï¼›å¦‚æœ`numble`æ˜¯`false`ï¼Œæ£€æŸ¥çŒœæµ‹æ˜¯å¦å°‘äºä¸‰ä¸ª(è¿™å®è´¨ä¸Šæ˜¯æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç»åšå‡ºäº†æœ€åçš„çŒœæµ‹)ã€‚å¦‚æœæ˜¯ï¼Œåé¦ˆæ˜¯â€œç»§ç»­ä¸‹å»â€¦â€¦â€ï¼Œå¦åˆ™æ˜¯â€œä¸ï¼é‚£æ˜¯(ç­”æ¡ˆ)â€ã€‚

ç¬¬ä¸€éƒ¨åˆ†åˆ°æ­¤ä¸ºæ­¢ï¼ä½ å¯ä»¥åœ¨ä¸‹é¢çš„ CodePen æ¼”ç¤ºä¸­çœ‹åˆ°å®Œæ•´çš„ä»£ç ã€‚

[https://codepen.io/goldenrod/embed/QWQRWLZ?height=300&default-tab=html%2Cresult&slug-hash=QWQRWLZ&editable=true&user=goldenrod&name=cp_embed_1](https://codepen.io/goldenrod/embed/QWQRWLZ?height=300&default-tab=html%2Cresult&slug-hash=QWQRWLZ&editable=true&user=goldenrod&name=cp_embed_1)

## é¢œè‰²é€»è¾‘

æ­£å¦‚æ–‡ç« å¼€å¤´æ‰€æ¦‚è¿°çš„ï¼Œé¢œè‰²æ˜¯ Wordle çš„ä¸»è¦ç„¦ç‚¹ï¼Œå› æ­¤ä¹Ÿæ˜¯ Numble çš„ç„¦ç‚¹ã€‚å¦‚æœä½ è¿˜æ²¡æœ‰ç©è¿‡ [Numble](https://numble.online/) æˆ– [Wordle](https://www.nytimes.com/games/wordle/index.html) ä¼šå¼ºçƒˆå»ºè®®ä½ å»ç©ï¼Œä»¥ä¾¿æ­£ç¡®ç†è§£é¢œè‰²çš„å·¥ä½œæ–¹å¼ã€‚

è¿™æ˜¯ Numble ä½¿ç”¨çš„ç€è‰²ç³»ç»Ÿçš„ç¤ºä¾‹:

![Numble Color Example](img/37805e141e7b357a25bd9c06d1165849.png)

åœ¨ç”¨æˆ·åšå‡ºçŒœæµ‹åï¼Œé¢œè‰²åœ¨ä¸¤ä¸ªåœ°æ–¹æ›´æ–°:å®é™…çš„çŒœæµ‹å’Œé”®ç›˜ä¸Šã€‚ä¸¤è€…çš„é€»è¾‘å®Œå…¨ç›¸åŒï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªåä¸º`getColors`çš„ç®­å¤´å‡½æ•°ï¼Œå®ƒå°†çŒœæµ‹å€¼å’Œå®é™…æ•°å­—ä½œä¸ºå‚æ•°ã€‚

```
const getColors = (guess,number) => guess.map((digit,index) => number.includes(digit) ? digit.toString() === number[index] ? "green" : "yellow": "black") 
```

æˆ‘ä»¬æ˜ å°„â€œguessâ€æ•°ç»„å¹¶ä½¿ç”¨â€œString.includes(item)â€æ–¹æ³•ï¼Œé¦–å…ˆæ£€æŸ¥ç­”æ¡ˆæ˜¯å¦åŒ…å«çŒœæµ‹çš„æ•°å­—ã€‚å¦‚æœæ˜¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ£€æŸ¥æ•°å­—æ˜¯å¦åœ¨æ­£ç¡®çš„ä½ç½®ã€‚å¦‚æœæ˜¯ï¼Œåˆ™é¢œè‰²è¢«æŒ‡å®šä¸ºâ€œç»¿è‰²â€ã€‚å¦‚æœæ²¡æœ‰ï¼Œé¢œè‰²ä¸ºâ€œé»„è‰²â€ã€‚å¦åˆ™ï¼Œè¯¥æ•°å­—æ ¹æœ¬ä¸åœ¨ç­”æ¡ˆä¸­ï¼Œå› æ­¤é¢œè‰²ä¸ºâ€œé»‘è‰²â€ã€‚

è¿™ä¸ªç®­å¤´å‡½æ•°åº”è¯¥è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­æœ‰ä¸‰ä¸ªé¡¹ç›®ï¼Œåˆ†åˆ«æ˜¯â€œç»¿è‰²â€ã€â€œé»„è‰²â€æˆ–â€œé»‘è‰²â€ï¼Œå¯¹åº”äºâ€œçŒœæµ‹â€ä¸­çš„æ¯ä¸ªæ•°å­—ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨`getColors([1,2,3], "327")`è°ƒç”¨å‡½æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥è¿”å›çš„æ•°ç»„æ˜¯`["black", "green", "yellow"]`

ä½ å¯èƒ½æ³¨æ„åˆ°æˆ‘ä»¬ä¸å¾—ä¸æŠŠæ•°å­—è½¬æ¢æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦å°†å®ƒä¸å­˜å‚¨ä¸ºå­—ç¬¦ä¸²çš„ç­”æ¡ˆè¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœä¸¤ä¸ªå…ƒç´ å±äºä¸åŒçš„ç±»å‹ï¼Œå°±ä¸èƒ½å¯¹å®ƒä»¬è¿›è¡Œæ¯”è¾ƒã€‚ä½ å¯ä»¥å°è¯•ï¼Œä½†æ˜¯è¦å‡†å¤‡å¥½è¿›å…¥ä¸€ä¸ª JavaScript ç±»å‹çš„å¼ºåˆ¶ç—›è‹¦çš„ä¸–ç•Œã€‚

æ³¨æ„:Wordle å¤„ç†é‡å¤çš„æ–¹å¼ä¸åŒï¼Œæ‰€ä»¥å¦‚æœä½ æƒ³è®©è¿™ä¸ªå˜å¾—æ›´éš¾ï¼Œä½ å¯ä»¥è¯•ç€æ¨¡ä»¿ Wordle çš„æ–¹æ³•ã€‚

å¯¹äºä¸‹ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä¸éœ€è¦å¯¹`State`åšä»»ä½•ä¿®æ”¹æˆ–æ·»åŠ ä»»ä½•ä¸œè¥¿ï¼Œä½†æ˜¯`View`ç¡®å®å˜å¾—æœ‰ç‚¹å¤æ‚ã€‚æ­£å¦‚åœ¨ç¬¬ä¸€ç¯‡æ–‡ç« ä¸­ç®€è¦æåˆ°çš„ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ CSS ç±»æ¥å…è®¸æˆ‘ä»¬æ”¹å˜é¢œè‰²ã€‚

```
const View = state => html` <h1>Numble</h1>
${state.started ?
 html`<div id="guesses">
${state.guesses.map((guess, i) => html`<div class="row">${guess.map((number,j)=> html`<div class=${state.guessCount > i ? getColors(guess,state.number)[j] : "grey"}">${number}</div>`)}</div>`)}
</div>
<p id="feedback">${state.feedback}</p>
<div id="keyboard">
${state.digits.map((digit,index) => html`<button class=${digit} onclick=${state.appear(index)}>${index}</button>`)}
  <button onclick=${state.remove}>DELETE</button>
  <button onclick=${state.check}>ENTER</button>
</div>
 <button onclick=${state.finish}>END</button>`
:
 html`<button onclick=${state.start}>START</button>`
}` 
```

å¦‚æ‚¨æ‰€è§ï¼Œä»…æœ‰ä¸¤å¤„å‘ç”Ÿäº†å˜åŒ–ï¼Œå³é”®ç›˜æŒ‰é’®å’Œæ¯ä¸€è¡Œçš„å•ä¸ªéƒ¨åˆ†çš„ CSS ç±»ã€‚

ä»â€œguessâ€div å¼€å§‹ï¼Œæˆ‘ä»¬æœ‰ä»¥ä¸‹é€»è¾‘:

```
state.guessCount > i ? getColors(guess,state.number)[j] : "grey" 
```

é¦–å…ˆæ£€æŸ¥`guessCount`æ˜¯å¦é«˜äºç´¢å¼•ï¼Œè¿™æ˜¯ä¸ºäº†ç¡®ä¿æ¯æ¬¡é¡µé¢è¢«é‡æ–°æ¸²æŸ“æ—¶ï¼Œæ‰€æœ‰å…ˆå‰çš„çŒœæµ‹éƒ½è¢«é‡æ–°ç€è‰²ã€‚å¦‚æœéœ€è¦ä¸€ç§é¢œè‰²ï¼Œæˆ‘ä»¬è°ƒç”¨`getColors`å‡½æ•°ï¼Œå°†ç”¨æˆ·çš„çŒœæµ‹å’Œç­”æ¡ˆä½œä¸ºå‚æ•°ï¼Œå¹¶è·å–æ¯ä¸ªæ•°å­—ç´¢å¼•å¤„çš„é¡¹ç›®ï¼Œ`j`ã€‚

ä¸‹é¢æ˜¯ç”¨æˆ·çŒœå®Œä¸€æ¬¡åä½ çš„å±å¹•åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­:

![First Guess](img/e5ac585f87a95ca2273d5315045cafdd.png)

æ¥è‡ª`getColors`å‡½æ•°çš„æ•°ç»„æ˜¯:

```
["yellow", "black", "black"] 
```

å› æ­¤ï¼Œç”¨æˆ·ç°åœ¨å°†çŸ¥é“ 3 åœ¨æ•°å­—ä¸­ä½†åœ¨é”™è¯¯çš„ä½ç½®ï¼Œ4 å’Œ 5 æ ¹æœ¬ä¸åœ¨æ•°å­—ä¸­ã€‚

é”®ç›˜é€»è¾‘è¦ç®€å•å¾—å¤šï¼Œä½†å®ƒä»ç„¶ä½¿ç”¨æˆ‘ä»¬ä¹‹å‰ç¼–å†™çš„ç›¸åŒçš„`getColor`å‡½æ•°ã€‚è¿˜è®°å¾—ä¹‹å‰æˆ‘ä»¬æ˜¯å¦‚ä½•ç”¨â€œç°è‰²â€å¡«å……`digits`æ•°ç»„çš„å—ï¼Ÿè¿™å°±æ˜¯æˆ‘ä»¬è¿™ä¹ˆåšçš„åŸå› ã€‚

å½“é”®ç›˜è¢«ç»˜åˆ¶åœ¨å±å¹•ä¸Šæ—¶ï¼Œè¿™ä¸ªç±»å°±æ˜¯é”®åœ¨`digits`æ•°ç»„ä¸­çš„ç´¢å¼•å€¼ã€‚ç¨åï¼Œæˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•æ”¹å˜é¢œè‰²ï¼Œä½†æ˜¯ä½¿ç”¨ä¸Šé¢çš„ä¾‹å­ï¼Œåœ¨ç¬¬ä¸€æ¬¡çŒœæµ‹ä¹‹å,`digits`æ•°ç»„åº”è¯¥æ˜¯è¿™æ ·çš„:

```
["grey", "grey", "grey", "yellow", "black", "black", "grey", "grey", "grey", "grey"] 
```

æˆ‘ä»¬å°±å¿«åˆ°äº†ï¼æˆ‘ä»¬æœ€åçš„å·¥ä½œæ˜¯æ”¹å˜`check`å‡½æ•°ã€‚

```
const check = event => {
  Update(state => {
    const guess = state.guesses[state.guessCount]
    const numble = guess.join`` === state.number
    const colors = getColors(guess,state.number)
    return {
      feedback: numble ? "NUMBLE!" : state.guessCount < 3 ? "Keep going..." : `Nope! It was ${state.number}`,
      digits: state.digits.map((colour,digit) => guess.includes(digit) ? colors[guess.indexOf(digit)] : colour),
      guessCount: state.guessCount + 1,
      count: 0
    }
  })
} 
```

åœ¨`Update`å‡½æ•°ä¸­ï¼Œè¿˜æœ‰ä¸¤ä¸ªå¸¸é‡ã€‚è¿™åªæ˜¯ä½¿è¿”å›å¯¹è±¡ä¸­çš„é€»è¾‘å˜å¾—å®¹æ˜“ã€‚

æˆ‘ä»¬æœ‰`guess`ï¼Œå®ƒæ˜¯ç”¨æˆ·åˆšåˆšçŒœåˆ°çš„ä¸‰ä¸ªæ•°å­—çš„æ•°ç»„(å› æ­¤ä½¿ç”¨äº†`state.guessCount`)ã€‚æˆ‘ä»¬ä¹Ÿæœ‰ä»¥å‰çš„`numble`ï¼Œä½†æ˜¯è¿™æ¬¡ä½¿ç”¨æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„`guess`å¸¸é‡ã€‚è¿™æœ‰åŠ©äºä»£ç æ›´åŠ æ¸…æ™°ï¼Œé¿å…é‡å¤ã€‚æœ€åï¼Œæˆ‘ä»¬æœ‰`colors`,å®ƒæ˜¯å½“ä½¿ç”¨ç”¨æˆ·å½“å‰çš„çŒœæµ‹å’Œç­”æ¡ˆè¿è¡Œ`getColors`å‡½æ•°æ—¶è¿”å›çš„æ•°ç»„ã€‚

è¿™å°†æ›´æ–°æ•°å­—æ•°ç»„ï¼Œå¹¶ç¡®ä¿é”®ç›˜ä¸Šçš„æ•°å­—åœ¨æ¯æ¬¡çŒœæµ‹åéƒ½æ­£ç¡®ç€è‰²ã€‚

ç°åœ¨ï¼Œè¿”å›å¯¹è±¡ä¸ä¸Šé¢çš„ç›¸åŒï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿæ›´æ–°äº†`digits`å±æ€§ã€‚

```
state.digits.map((color,digit) => guess.includes(digit) ? colors[guess.indexOf(digit)] : color) 
```

è¿™æ˜¯æˆ‘ä»¬æœ€åçš„æ˜ å°„å‡½æ•°ï¼å®ƒä¸»è¦æ£€æŸ¥é”®ç›˜ä¸Šçš„æ•°å­—(å³`digit`)æ˜¯å¦åœ¨çŒœæµ‹ä¸­ã€‚å¦‚æœæ˜¯å½“å‰é¢œè‰²ï¼Œåº”è¯¥ç”¨ä»`getColors`å‡½æ•°ç”Ÿæˆçš„é¢œè‰²æ›¿æ¢ï¼Œå¦åˆ™é¢œè‰²åº”è¯¥ä¿æŒä¸å˜ã€‚

ä½¿ç”¨ä¸ä¸Šé¢ç›¸åŒçš„çŒœæµ‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é”®ç›˜åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­:

![First Guess Keyboard](img/348aa55a74fe2ca7fc3db073bfc4a08a.png)

å°±æ˜¯è¿™æ ·ï¼Numble çš„å…¨åŠŸèƒ½ç‰ˆæœ¬ï¼

åŒæ ·ï¼Œå®Œæ•´çš„ä»£ç åº”è¯¥æ˜¯è¿™æ ·çš„:

[https://codepen.io/goldenrod/embed/XWZwWyN?height=300&default-tab=html%2Cresult&slug-hash=XWZwWyN&editable=true&user=goldenrod&name=cp_embed_2](https://codepen.io/goldenrod/embed/XWZwWyN?height=300&default-tab=html%2Cresult&slug-hash=XWZwWyN&editable=true&user=goldenrod&name=cp_embed_2)

åœ¨ Numble çš„å®é™…ç‰ˆæœ¬ä¸­ï¼Œæˆ‘æ·»åŠ äº†ä¸€äº›åŠŸèƒ½ï¼Œåªæ˜¯ä¸ºäº†è®©æ¸¸æˆæ›´åŠ åŠ¨æ€ã€‚å¦‚æœä½ æƒ³æŒ‘æˆ˜è‡ªå·±ï¼Œå¢åŠ ä¸€äº›é¢å¤–çš„åŠŸèƒ½ï¼Œè¿™é‡Œæœ‰ä¸€äº›æ¥è‡ªæˆ‘çš„ Numble æœ€ç»ˆç‰ˆæœ¬çš„å»ºè®®:

*   å†ç©ä¸€æ¬¡â€”â€”å…è®¸ç”¨æˆ·æƒ³ç©å¤šå°‘æ¬¡å°±ç©å¤šå°‘æ¬¡ï¼Œæˆ–è€…æ¯å¤©åªè¿›è¡Œä¸€æ¬¡æŒ‘æˆ˜
*   streakâ€”â€”è®°å½•ä½ ä¸€è¡Œä¸­æœ‰å¤šå°‘ä¸ªæ­£ç¡®ç­”æ¡ˆ
*   æœ€ä½³è¿èƒœâ€”â€”ç”¨æˆ·ä¿æŒçš„æœ€é•¿è¿èƒœ
*   é»‘æš—æ¨¡å¼â€”â€”æ›´åƒæ˜¯ä¸€ä¸ª css æŒ‘æˆ˜ï¼Œä½†ä¹Ÿå¾ˆæœ‰è¶£
*   æ˜¾ç¤ºç»Ÿè®¡æ•°æ®â€”â€”æ¯åœºæ¸¸æˆç”¨æˆ·çŒœäº†å¤šå°‘æ¬¡çš„åˆ†ç±»
*   åˆ†äº«åŠŸèƒ½â€“è®©ç”¨æˆ·åˆ†äº«ä»–ä»¬çš„æœ€ä½³è®°å½•

æˆ‘çœŸçš„å¸Œæœ›ä½ å’Œæˆ‘ä¸€æ ·åœ¨åš Numble çš„æ—¶å€™ç©å¾—å¼€å¿ƒï¼

## åˆ†äº«è¿™ç¯‡æ–‡ç« 